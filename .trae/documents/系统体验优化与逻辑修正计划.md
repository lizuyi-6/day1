# 系统体验优化与逻辑修正计划

针对您提出的三个核心问题，我制定了以下改进计划：

## 1. 放宽部署校验逻辑
*   **问题**: 目前部署时强制要求 LLM 节点必须有系统提示词，这过于严格。
*   **解决方案**: 修改前端 `validateWorkflow` 和 `validateNode` 逻辑。
    *   对于 `llm` 节点，将 `systemPrompt` (提示词) 的检查改为**非强制**，或者只要 `userPrompt` 和 `systemPrompt` 二者有其一即可。
    *   添加“警告”机制而非直接报错，允许用户在有风险的情况下继续部署。

## 2. 改进对话界面 (Chat View)
*   **问题**: “编排器”概念令人困惑，且无法选择要对话的工作流。
*   **解决方案**:
    *   **重构侧边栏**: 移除硬编码的“编排器”和“代码解释器”。改为**动态加载已发布的工作流列表**。
    *   **选择交互**: 用户在侧边栏点击某个工作流（如“示例工作流 - AI智能助手”），该工作流即成为当前“活跃 Agent”。
    *   **明确指引**: 如果没有选择工作流，聊天区域显示“请从左侧选择一个助手开始对话”。

## 3. 确保示例工作流可见性
*   **问题**: 用户反馈仍未找到示例工作流。
*   **解决方案**:
    *   虽然通过后端修正了 `findAll`，但可能因为浏览器缓存或前端分页逻辑导致未刷新。
    *   我将在前端 `WorkflowListView` 增加显式的刷新机制，并确保在 Chat 界面能正确拉取到它。

---

## 执行步骤

1.  **修改校验逻辑**:
    *   编辑 `frontend/src/services/workflowService.ts`，放宽 `validateNode` 中对 LLM 节点的校验。
2.  **重构对话侧边栏**:
    *   编辑 `frontend/src/views/ChatView.vue`。
    *   添加 `loadWorkflows` 方法，获取真实工作流列表。
    *   将侧边栏列表替换为 `v-for="wf in workflows"`。
    *   实现 `selectWorkflow(wf)` 逻辑，点击后切换当前对话上下文。
3.  **验证**:
    *   尝试部署一个无系统提示词的工作流，确认能成功。
    *   进入对话页面，确认能看到并选择“示例工作流”。
    *   与该工作流进行对话，确认响应正常。