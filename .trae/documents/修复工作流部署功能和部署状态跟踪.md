## 修复部署问题的计划

### 1. 修复前端部署功能
在 [WorkflowListView.vue](file:///x:/day1/frontend/src/views/WorkflowListView.vue) 中：
- 修改 `deployWorkflow` 函数，直接传递 `workflow.id` 而不是依赖 `window.location`
- 在 [workflowService.ts](file:///x:/day1/frontend/src/services/workflowService.ts) 中：
  - 修改 `deployWorkflow` 方法，接受 `workflowId` 参数而不是从 URL 获取
  - 改进错误处理和响应解析

### 2. 添加部署状态跟踪
在 [Workflow 实体](file:///x:/day1/backend/src/workflow/entities/workflow.entity.ts) 中：
- 添加 `status` 字段（可选值：'draft', 'published', 'archived'）
- 添加 `deployedAt` 日期字段
- 添加 `deploymentUrl` 字段存储部署后的 URL

在 [workflow.service.ts](file:///x:/day1/backend/src/workflow/workflow.service.ts) 中：
- 修改 `deploy` 方法，实际更新数据库中的工作流状态
- 保存部署 URL 和部署时间

### 3. 更新对话页面逻辑
在 [ChatView.vue](file:///x:/day1/frontend/src/views/ChatView.vue) 中：
- 添加逻辑来筛选已部署（status = 'published'）的工作流
- 在 "暂无已部署的工作流" 提示中添加重新加载按钮