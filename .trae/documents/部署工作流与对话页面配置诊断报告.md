# éƒ¨ç½²å·¥ä½œæµä¸å¯¹è¯é¡µé¢é…ç½®è¯Šæ–­æŠ¥å‘Š

æ ¹æ®æ‚¨çš„è¦æ±‚ï¼Œæˆ‘æ·±å…¥åˆ†æäº†ä»£ç åº“ï¼Œæ•´ç†äº†å…³äºéƒ¨ç½²å·¥ä½œæµã€æ—¥å¿—åŠå¯¹è¯é¡µé¢çš„è¯¦ç»†é…ç½®å’Œä»£ç å®ç°ä¿¡æ¯ã€‚

## 1. å·¥ä½œæµéƒ¨ç½²çŠ¶æ€ç¡®è®¤

ç›®å‰ç³»ç»Ÿä¸­çš„â€œéƒ¨ç½²â€æ˜¯ä¸€ä¸ªé€»è¾‘çŠ¶æ€æ›´æ–°ï¼Œè€Œéç‰©ç†éƒ¨ç½²åˆ°æ–°æœåŠ¡å™¨ã€‚

*   **éƒ¨ç½²æœºåˆ¶**ï¼š
    *   å‰ç«¯ `WorkflowListView.vue` è°ƒç”¨ `workflowService.deployWorkflow`ã€‚
    *   åç«¯ `WorkflowController` æ¥æ”¶è¯·æ±‚å¹¶æ›´æ–°æ•°æ®åº“ä¸­çš„å·¥ä½œæµçŠ¶æ€ã€‚
    *   **å…³é”®æ–‡ä»¶**ï¼š
        *   å‰ç«¯è°ƒç”¨ï¼š[WorkflowListView.vue](file:///x:/day1/frontend/src/views/WorkflowListView.vue#L146-L170)
        *   åç«¯æ¥å£ï¼š[workflow.controller.ts](file:///x:/day1/backend/src/workflow/workflow.controller.ts#L253-L261)
*   **éƒ¨ç½²é…ç½®**ï¼š
    *   ç›®å‰é…ç½®æ˜¯ç¡¬ç¼–ç åœ¨å‰ç«¯çš„é»˜è®¤å€¼ã€‚
    *   **é…ç½®å†…å®¹**ï¼š
        ```typescript
        const config: DeploymentConfig = {
          environment: 'production',
          version: '1.0.0',
          apiEnabled: true,
          webhooks: [],
        };
        ```
    *   **API è·¯ç”±**ï¼š`POST /workflow/:id/deploy`

## 2. å·¥ä½œæµæœåŠ¡å¯ç”¨æ€§éªŒè¯

å·¥ä½œæµé€šè¿‡ REST API æä¾›æœåŠ¡ï¼Œå¹¶æ”¯æŒ Socket.IO å®æ—¶æ—¥å¿—ã€‚

*   **API ç«¯ç‚¹**ï¼š
    *   æ‰§è¡Œå·¥ä½œæµï¼š`POST /workflow/:id/run`
    *   è°ƒè¯•èŠ‚ç‚¹ï¼š`POST /workflow/:id/debug`
    *   è·å–åˆ—è¡¨ï¼š`GET /workflow`
*   **éªŒè¯æ–¹æ³•**ï¼š
    *   **ä½¿ç”¨ Curl/Postman**ï¼š
        ```bash
        curl -X POST http://localhost:3000/workflow/<workflow_id>/run \
        -H "Content-Type: application/json" \
        -d '{"prompt": "Hello"}'
        ```
    *   **æ—¥å¿—æ£€æŸ¥**ï¼š
        *   åç«¯æ—¥å¿—ï¼šæ£€æŸ¥ Docker å®¹å™¨ `aether_backend` çš„æ§åˆ¶å°è¾“å‡ºã€‚
        *   å‰ç«¯æ—¥å¿—ï¼šæµè§ˆå™¨æ§åˆ¶å°ä¼šæ‰“å° `ğŸ”„ Loading workflows...` å’Œ `ğŸ“¥ Agents result:` ç­‰è°ƒè¯•ä¿¡æ¯ã€‚

## 3. å¯¹è¯é¡µé¢é›†æˆæ£€æŸ¥

å¯¹è¯é¡µé¢ (`ChatView.vue`) å°†å·¥ä½œæµè§†ä¸ºâ€œæ™ºèƒ½ä½“â€ (Agent) è¿›è¡Œäº¤äº’ã€‚

*   **åŠ è½½æœºåˆ¶**ï¼š
    *   ç»„ä»¶æŒ‚è½½æ—¶è°ƒç”¨ `loadAgents`ï¼Œå®è´¨æ˜¯è°ƒç”¨ `workflowService.getAllWorkflows` è·å–æ‰€æœ‰å·¥ä½œæµã€‚
    *   ä»£ç ä½ç½®ï¼š[ChatView.vue](file:///x:/day1/frontend/src/views/ChatView.vue#L60-L104)
*   **è°ƒç”¨æœºåˆ¶**ï¼š
    *   ç”¨æˆ·å‘é€æ¶ˆæ¯æ—¶ï¼Œè°ƒç”¨ `workflowService.executeWorkflow(activeAgentId.value, payload)`ã€‚
    *   è¾“å…¥å˜é‡è‡ªåŠ¨æ˜ å°„ï¼šé»˜è®¤å°è¯•æ˜ å°„åˆ° Start èŠ‚ç‚¹çš„ `userInput` æˆ– `input` å­—æ®µã€‚
    *   ä»£ç ä½ç½®ï¼š[ChatView.vue](file:///x:/day1/frontend/src/views/ChatView.vue#L175-L228)
*   **ç½‘ç»œè¯·æ±‚**ï¼š
    *   åŠ è½½åˆ—è¡¨ï¼š`GET /workflow?page=1&limit=50`
    *   å‘é€æ¶ˆæ¯ï¼š`POST /workflow/:id/run`

## 4. åˆ·æ–°æœºåˆ¶åˆ†æ

*   **åˆ—è¡¨é¡µåˆ·æ–°**ï¼š
    *   ç‚¹å‡»â€œåˆ·æ–°â€æŒ‰é’®è§¦å‘ `loadWorkflows` æ–¹æ³•ï¼Œé‡æ–°ä»åç«¯ API è·å–åˆ—è¡¨ã€‚
    *   ä»£ç ä½ç½®ï¼š[WorkflowListView.vue](file:///x:/day1/frontend/src/views/WorkflowListView.vue#L69-L91)
*   **å¯¹è¯é¡µåˆ·æ–°**ï¼š
    *   åœ¨æ²¡æœ‰ Agent æ—¶æ˜¾ç¤ºçš„â€œåˆ·æ–°åˆ—è¡¨â€æŒ‰é’®ä¼šè§¦å‘ `loadAgents`ã€‚
    *   ä»£ç ä½ç½®ï¼š[ChatView.vue](file:///x:/day1/frontend/src/views/ChatView.vue#L290)

## 5. ç¯å¢ƒä¿¡æ¯

*   **è¿è¡Œç¯å¢ƒ**ï¼š
    *   **Backend**: NestJS (Node.js), è¿è¡Œåœ¨ Docker å®¹å™¨ `aether_backend` (Port 3000)ã€‚
    *   **Frontend**: Vue 3 + Vite, è¿è¡Œåœ¨ Docker å®¹å™¨ `aether_frontend` (Port 5173)ã€‚
    *   **Database**: PostgreSQL with `pgvector` extension, è¿è¡Œåœ¨ `aether_db` (Port 5432)ã€‚
*   **é…ç½®æ–‡ä»¶**ï¼š
    *   [docker-compose.yml](file:///x:/day1/docker-compose.yml) å®šä¹‰äº†æœåŠ¡ç¼–æ’å’Œç½‘ç»œã€‚
    *   `.env` æ–‡ä»¶ï¼ˆæœªç›´æ¥æ˜¾ç¤ºï¼Œä½†åœ¨ docker-compose ä¸­å¼•ç”¨ï¼‰ç®¡ç†ç¯å¢ƒå˜é‡å¦‚ `DB_PASSWORD`, `OPENAI_API_KEY`ã€‚

**å»ºè®®åç»­æ­¥éª¤**ï¼š
å¦‚æœæ‚¨åœ¨éƒ¨ç½²æˆ–å¯¹è¯é›†æˆä¸­é‡åˆ°å…·ä½“é”™è¯¯ï¼Œè¯·æä¾›æµè§ˆå™¨æ§åˆ¶å°çš„æŠ¥é”™æˆªå›¾æˆ–åç«¯ Docker æ—¥å¿—ï¼Œæˆ‘å¯ä»¥é’ˆå¯¹æ€§åœ°ä¿®å¤ä»£ç ã€‚
