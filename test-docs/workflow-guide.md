# Aether Flow 工作流引擎使用指南

## 简介

Aether Flow 是一个专业的 AI 工作流自动化引擎，提供可视化编辑器，让用户能够轻松构建复杂的 AI 应用。

## 核心概念

### 节点（Nodes）

节点是工作流的基本构建块，每个节点执行特定的功能：

#### 1. Start 节点
- **类型**: 输入节点
- **功能**: 定义工作流的入口点
- **配置**: 设置输入变量（如用户输入、API 参数）

#### 2. LLM 节点
- **类型**: AI 处理节点
- **功能**: 调用大语言模型进行文本生成
- **配置**:
  - 模型选择（Qwen、OpenAI、Anthropic等）
  - 系统提示词
  - 温度参数（0-1）
  - 最大令牌数

#### 3. Knowledge 节点
- **类型**: 数据检索节点
- **功能**: 从向量知识库中检索相关文档
- **配置**:
  - 查询文本
  - 返回数量（topK）

#### 4. Delay 节点
- **类型**: 工具节点
- **功能**: 在工作流中添加延迟
- **配置**: 延迟时间（毫秒）

#### 5. End 节点
- **类型**: 输出节点
- **功能**: 定义工作流的结束点
- **配置**: 设置输出变量

### 连接（Edges）

连接用于定义节点之间的数据流向。一个节点的输出可以连接到另一个节点的输入。

## 创建工作流

### 步骤 1: 创建新工作流

1. 导航到"工作流"页面
2. 点击"新建工作流"按钮
3. 输入工作流名称和描述
4. 选择状态为"草稿"或"已发布"

### 步骤 2: 添加节点

从左侧工具栏拖拽节点到画布：
- 拖动 Start 节点定义入口
- 添加处理节点（如 LLM、Knowledge）
- 添加 End 节点定义出口

### 步骤 3: 配置节点

1. 点击画布上的节点
2. 右侧检查器面板显示节点配置选项
3. 设置节点参数
4. 点击"测试节点"验证配置

### 步骤 4: 连接节点

1. 从节点的输出端口拖拽连线
2. 连接到另一个节点的输入端口
3. 确保数据流向正确

### 步骤 5: 保存和发布

1. 点击"保存"按钮保存工作流
2. 点击"发布"按钮部署工作流
3. 工作流将在"对话"页面中显示为助手

## RAG 应用示例

构建一个简单的知识问答系统：

```
Start → Knowledge → LLM → End
```

1. **Start**: 接收用户问题
2. **Knowledge**: 从知识库检索相关文档
3. **LLM**: 基于检索到的文档生成回答
4. **End**: 返回最终答案

这样实现了一个完整的 RAG（检索增强生成）应用。

## 高级功能

### 变量映射

节点之间可以传递变量：
- 使用上游变量：在节点配置中选择"上游"模式
- 自定义变量：在节点配置中输入固定值

### 条件分支

使用 Condition 节点实现条件逻辑：
- 根据输入值判断执行路径
- 支持复杂的条件表达式

### 循环处理

使用 Loop 节点处理列表数据：
- 列表循环：遍历数组
- 计数循环：固定次数迭代
- 条件循环：满足条件时继续

## 最佳实践

1. **命名规范**: 为节点和工作流使用清晰的名称
2. **模块化**: 将复杂工作流拆分为子工作流
3. **测试**: 在发布前充分测试每个节点
4. **文档**: 为工作流添加详细描述
5. **版本控制**: 定期保存工作流版本

## 故障排除

### 常见问题

**Q: 工作流执行失败**
A: 检查节点配置是否正确，查看错误日志

**Q: LLM 节点无响应**
A: 验证 API 密钥和模型配置

**Q: Knowledge 节点返回空结果**
A: 确认知识库中有相关文档，调整查询参数

### 调试技巧

1. 使用 WorkflowInspector 的测试功能
2. 查看节点执行日志
3. 检查变量映射是否正确
4. 逐步测试每个节点

## 总结

Aether Flow 提供了强大而灵活的工作流构建能力。通过组合不同的节点，您可以构建各种 AI 应用，从简单的文本生成到复杂的 RAG 系统。

开始探索 Aether Flow，释放 AI 的无限可能！
